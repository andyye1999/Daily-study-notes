# [平滑之收敛时间计算](https://zhuanlan.zhihu.com/p/377692978)
![AE0E54241100BB3C821748615CFC06AE](https://cdn.jsdelivr.net/gh/andyye1999/image-hosting@master/20221029/AE0E54241100BB3C821748615CFC06AE.7d1v8hyup5c0.webp)

![IMG_3016](https://raw.githubusercontent.com/andyye1999/image-hosting/master/20220524/IMG_3016.6gesqckjen80.webp)


![平滑之收敛时间计算](https://pica.zhimg.com/v2-96be71b46f1ffd4b2be1db3dbecb9c41_720w.gif?source=172ae18b)
在实时语音信号处理中，有一个策略经常用到：平滑。我们以噪声更新为例进行说明：
noise(n)=α∗noise(n−1)+(1−α)∗NewNoise
α是0~1之间的数，经常取0.97 0.9等。
上式本质上是过了一个**低通滤波器**，滤除一些突变的野值信号。在实时语音信号处理中，这种策略非常好用，特别是实际场景下，在一些特征、噪声更新的时候，总会碰到一些突变的野值。经过一个低通平滑，就能很好的滤除掉这些。

最近，我在研究这种平滑策略的时候，冒出一个问题：**如何计算收敛时间呢？**

例如：如果估计的噪声一直是10，经过上式的平滑，要经过多少帧才能收敛到10呢？

为了计算收敛时间，我们需要把问题抽象一下，如下图所示：
![](https://pic4.zhimg.com/80/v2-50f9fc6206dd49441340011eb1df63d3_720w.webp)

把问题抽象完之后，感觉就是一道高中数学的递归题。不多解释了，直接求解吧。

![](https://pic3.zhimg.com/80/v2-2ad6db4721b8c9f6f8cccefcbfc6130e_720w.webp)

OK，这样我们就得到了 迭代次数 n 后的特征值与常数 A 的关系：

f(n)=A∗(1−αn)

代入最开始讲到的噪声更新式子：

noise(n)=α∗noise(n−1)+(1−α)∗NewNoise

以speex降噪模块的迭代参数举例： α=0.97 。如果估计的噪声 NewNoise 是平稳的，即是常数。

那么这种平滑策略，最大（先前状态的噪声估计值为0）需要75帧，才能达到 NewNoise 的90%。而达到 NewNoise 的95%，最大需要99帧才能收敛。

---

至此，计算出来了各种平滑策略的收敛式子。也能很清楚的看到背后的物理意义：需要多少时间才能收敛到特征值的90% 95%。有此收敛式子，也可以很好的去设计平滑策略，可以很好的根据所需要，设计各种 α 值，进而决定对应的收敛时间。